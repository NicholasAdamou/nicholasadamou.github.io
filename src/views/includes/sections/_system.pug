extends ../../layouts/_section.pug

block mixins
    mixin tag(name, attr, val)
        if attr && val
            span.tag &lt;#{name} #{attr}=&quot;#{val}&quot;&gt;
        else
            span.tag &lt;#{name}&gt;

block content
    section#system
        +tag("system", "id", "sysinfo")
        script(src="https://l2.io/ip.js?var=ipaddr")
        script. 
            var nVer = navigator.appVersion;
            var nAgt = navigator.userAgent;
            var browserName  = navigator.appName;
            var fullVersion  = '' + parseFloat(navigator.appVersion); 
            var majorVersion = parseInt(navigator.appVersion,10);
            var nameOffset, verOffset, ix, 
                browserIcon = "<i class=\"fa fa-globe\" aria-hidden=\"true\"></i>";

            // In Opera, the true version is after "Opera" or after "Version"
            if ((verOffset = nAgt.indexOf("Opera")) != -1) {
                browserName = "Opera";
                browserIcon = "<i class=\"fa fa-opera\" aria-hidden=\"true\"></i>"
                fullVersion = nAgt.substring(verOffset + 6);
            if ((verOffset=nAgt.indexOf("Version")) != -1) 
                fullVersion = nAgt.substring(verOffset + 8);
            }
            // In MSEdge, the true version is after "MSEdge" in userAgent
            else if ((verOffset = nAgt.indexOf("Edge")) != -1) {
                browserName = "Edge";
                browserIcon = "<i class=\"fa fa-edge\" aria-hidden=\"true\"></i>"
                fullVersion = nAgt.substring(verOffset + 6);
            }   
            // In MSIE, the true version is after "MSIE" in userAgent
            else if ((verOffset = nAgt.indexOf("MSIE")) != -1) {
                browserName = "Microsoft Internet Explorer";
                browserIcon = "<i class=\"fa fa-internet-explorer\" aria-hidden=\"true\"></i>"
                fullVersion = nAgt.substring(verOffset + 5);
            }
            // In Chrome, the true version is after "Chrome" 
            else if ((verOffset = nAgt.indexOf("Chrome")) != -1) {
                browserName = "Chrome";
                browserIcon = "<i class=\"fa fa-chrome\" aria-hidden=\"true\"></i>"
                fullVersion = nAgt.substring(verOffset + 7);
            }
            // In Safari, the true version is after "Safari" or after "Version" 
            else if ((verOffset = nAgt.indexOf("Safari")) != -1) {
                browserName = "Safari";
                browserIcon = "<i class=\"fa fa-safari\" aria-hidden=\"true\"></i>"
                fullVersion = nAgt.substring(verOffset + 7);
            if ((verOffset = nAgt.indexOf("Version")) != -1) 
                fullVersion = nAgt.substring(verOffset + 8);
            }
            // In Firefox, the true version is after "Firefox" 
            else if ((verOffset = nAgt.indexOf("Firefox")) != -1) {
                browserName = "Firefox";
                browserIcon = "<i class=\"fa fa-firefox\" aria-hidden=\"true\"></i>"
                fullVersion = nAgt.substring(verOffset + 8);
            }
            // In most other browsers, "name/version" is at the end of userAgent 
            else if ((nameOffset=nAgt.lastIndexOf(' ') + 1) < 
                (verOffset = nAgt.lastIndexOf('/')) ) 
            {
                browserName = nAgt.substring(nameOffset, verOffset);
                fullVersion = nAgt.substring(verOffset + 1);
                if (browserName.toLowerCase() == browserName.toUpperCase()) {
                    browserName = navigator.appName;
                }
            }
            // trim the fullVersion string at semicolon/space if present
            if ((ix = fullVersion.indexOf(";")) != -1)
                fullVersion=fullVersion.substring(0, ix);
            if ((ix = fullVersion.indexOf(" ")) != -1)
                fullVersion=fullVersion.substring(0, ix);

            majorVersion = parseInt('' + fullVersion, 10);
            if (isNaN(majorVersion)) {
                fullVersion  =  '' + parseFloat(navigator.appVersion); 
                majorVersion = parseInt(navigator.appVersion, 10);
            }

            var OSName = "Unknown OS";
            if (navigator.appVersion.indexOf("Win") != -1) OSName = "Windows";
            if (navigator.appVersion.indexOf("Mac") != -1) OSName = "MacOS";
            if (navigator.appVersion.indexOf("X11") != -1) OSName = "UNIX";
            if (navigator.appVersion.indexOf("Linux") != -1) OSName = "Linux";

            //-+  "<br>(User-Agent): <i class=\"fa fa-user-secret\" aria-hidden=\"true\"></i> <span style=\"color: #1E9F75; font-weight: bold;\">" + navigator.userAgent + "</span>"
            document.write("" 
            + "<br>"
            + "(Operating System): "
            + "<i class=\"fa fa-hdd-o\" aria-hidden=\"true\"></i> <span style=\"color: #547900; font-weight: bold;\">" + OSName + "</span>"
            + "<br>"
            + "(Browser): "
            + browserIcon + " <span style=\"color: #547900; font-weight: bold;\">" + browserName + "</span> "
            + "<span style=\"color: #547900; font-weight: bold;\">" + fullVersion + "</span>"
            + "<br>"
            + "(IP Address): "
            + "<i class=\"fa fa-location-arrow\"></i><span style=\"color: #547900; font-weight: bold;\"> " + ipaddr + "</span>"
            + "<br>"
            );
        +tag("/system")